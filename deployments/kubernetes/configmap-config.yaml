apiVersion: v1
kind: ConfigMap
metadata:
  name: gohoarder-config
  namespace: default
data:
  config.yaml: |
    server:
      host: "0.0.0.0"
      port: 8080
      read_timeout: 30s
      write_timeout: 30s

    cache:
      max_size_bytes: 10737418240  # 10GB
      default_ttl: 24h
      cleanup_interval: 1h

    storage:
      backend: filesystem
      path: /var/lib/gohoarder/cache

    metadata:
      backend: sqlite
      connection: /var/lib/gohoarder/gohoarder.db

    security:
      enabled: true
      providers:
        - osv
        - github
      severity_threshold: medium
      block_on_vulnerability: false
      rescan_interval: 24h

    handlers:
      npm:
        enabled: true
        upstream_registry: "https://registry.npmjs.org"

      pypi:
        enabled: true
        upstream_index: "https://pypi.org/simple"

      go:
        enabled: true
        upstream_proxy: "https://proxy.golang.org"
        checksum_db: "https://sum.golang.org"
        # Path to git credentials file (mounted from Secret)
        git_credentials_file: /etc/gohoarder/git-credentials.json

    logging:
      level: info
      format: json
